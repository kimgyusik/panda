<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="productMapper">
	<resultMap type="Product" id="productResultSet">
		<id property="pId" column="p_id"/>
		<result property="pName" column="p_name"/>
		<result property="sNo" column="s_no"/>
		<result property="pContent" column="p_content"/>
		<result property="cId" column="c_id"/>
		<result property="pCount" column="p_count"/>
		<result property="pOk" column="p_ok"/>
		<result property="pStatus" column="p_status"/>
		<result property="pCreateDate" column="p_create_date"/>
	</resultMap>
	
	<resultMap type="Category" id="categoryResultSet">
		<id property="cId" column="c_id"/>
		<result property="cName" column="c_name"/>
		<result property="cName2" column="c_name2"/>
	</resultMap>
	
	<resultMap type="ProductAttachment" id="paResultSet">
		<id property="paId" column="pa_id"/>
		<result property="paCreateDate" column="pa_create_date"/>
		<result property="paOriginName" column="pa_origin_name"/>
		<result property="paChangeName" column="pa_change_name"/>
		<result property="paFileLevel" column="pa_file_level"/>
		<result property="paStatus" column="pa_status"/>
		<result property="pId" column="p_id"/>
		<result property="filePath" column="file_path"/>
	</resultMap>
	
	<resultMap type="ProductOption" id="poResultSet">
		<id property="oNo" column="o_No"/>
		<result property="pId" column="p_id"/>
		<result property="oName" column="o_name"/>
		<result property="oPrice" column="o_price"/>
		<result property="oAmount" column="o_amount"/>
		<result property="oStatus" column="o_status"/>
		<result property="oPurchase" column="o_purchase"/>
		<result property="paChangeName" column="pa_change_name"/>
		<result property="filePath" column="file_path"/>
	</resultMap>
	
	<select id="selectcList" resultMap="categoryResultSet">
		select *
		from category
	</select>
	
	<select id="selectList" resultMap="poResultSet" parameterType="_int">
		select o.*, pa.pa_change_name, pa.file_Path
		from Product_option o
		left join product p on p.p_id=o.p_Id
		left join product_attachment pa on p.p_id=pa.p_id
		where o_status='Y' and p.s_No = #{sNo}
		order by o_No desc
	</select>
	
	<insert id="insertProduct" parameterType="Product">
		insert into Product values(product_seq.nextval, #{pName}, #{sNo}, #{pContent}, #{cId}, default, default, default, default, default)
	</insert>
	
	<insert id="insertPa" parameterType="ProductAttachment">
		insert into Product_Attachment values(product_attachment_seq.nextval, default, #{paOriginName}, #{paChangeName}, #{paFileLevel}, default,product_seq.currval, #{filePath} )
	</insert>
	
	<insert id="insertPo" parameterType="ProductOption">
		insert into Product_Option values(product_Option_seq.nextval, #{oName}, #{oPrice}, #{oAmount}, default, default, product_seq.currval)
	</insert>




<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 경계선 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<!-- To.. 조장님께  -->
<!-- 안녕하세요 저는 main을 건들여 보고 있는 팀원 한수진입니다.... -->
<!-- 다름이 아니오라 제가 home에 각 '카테고리들의 hot 상품들'과 'new 제품들'을 불러 오려는데 -->
<!-- product가 필요해 이 곳에 은근슬쩍 탑승하게 되었습니다..... -->
<!-- 혹시 제가 이 곳을 사용해도 된다면 경계선을 제외하고 편지를 지워주시면 경계선 밑으로만 조용히 사용하도록 하겠습니다. -->
<!-- 만약 다른 의견이 있으시다면 따로 연락 부탁드립니다.... -->
<!-- 그럼 이만.... 우리 모두 화이팅 합시다...  -->
<!-- 아자 아자 화이팅    2019.10.25 수진 -->

	<!-- <resultMap type="Home" id="homeResultSet">
		<id property="pId" column="p_id"/>
		<result property="pName" column="p_name"/>
		<result property="cName" column="c_name"/>
		<result property="cName2" column="c_name2"/>
		<result property="paCreateDate" column="pa_create_date"/>
		<result property="paOriginName" column="pa_origin_name"/>
		<result property="oPrice" column="o_price"/>
	</resultMap>

	<select id="selectHotTopList" resultMap="homeResultSet">
		select *
		from product
		
		order by p_purchase
	</select>
 -->


</mapper>
